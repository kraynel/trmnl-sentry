
{% template apdex %}
<div class="item">
  <div class="meta"></div>
  <div class="content">
    <span class="value value--tnums" data-value-format="true">{{ IDX_2.data[0]["apdex(300)"] | default: 'N/A' }}</span>
    <span class="label">Apdex</span>
  </div>
</div>
{% endtemplate %}

{% template misery %}
<div class="item">
  <div class="meta"></div>
  <div class="content">
    <span class="value value--tnums" data-value-format="true">{{ IDX_2.data[0]["user_misery(300)"] | default: 'N/A' }}</span>
    <span class="label">User Misery</span>
  </div>
</div>
{% endtemplate %}

{% template errors %}
<div class="item">
  <div class="meta"></div>
  <div class="content">
    <span class="value value--tnums" data-value-format="true">{{ IDX_0.data[0]["count()"] | default: 'N/A' }}</span>
    <span class="label">Number of Errors</span>
  </div>
</div>
{% endtemplate %}

{% template issues %}
<div class="item">
  <div class="meta"></div>
  <div class="content">
    <span class="value value--tnums" data-value-format="true">{{ IDX_0.data[0]["count_unique(issue)"] | default: 'N/A' }}</span>
    <span class="label">Number of Issues</span>
  </div>
</div>
{% endtemplate %}


{% template title_bar %}
<div class="title_bar">
  <svg class="image image-stroke image-stroke--medium" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m248.6 69.2-49.3 85.3C311.2 228.8 377.4 357.5 369 484H244.3c3.7-88.2-31.5-169-107.2-222.3L112 305.5c54.7 38.6 86.9 104 82.7 178.2H44.5c-39.2-3-53.9-39.9-38.5-69.2l30.3-52.6 32.4 18.7-30 52c-2.8 6.5-1.7 12.9 7.3 13.7h110c-7.2-54.4-36-97.3-94.6-127.9L123.8 210C226 262.9 277.4 361.7 281 446.6h50C324.4 328 256.5 226 148.3 167.9L217.1 49c19.5-27.4 58.6-28.7 77.8.3L506.2 415c17.8 34.8-8 68.6-42.9 68.7h-46.6v-37.4h47.7c8.2.2 12.8-5.5 8.7-13.9L263.3 69.2a9 9 0 0 0-14.7 0z"/></svg>
  <span class="title">Sentry - {{ trmnl.plugin_settings.custom_fields_values.period }}</span>
  <span class="instance">{{ IDX_4.data[0].name }}</span>
</div>
</div>
{% endtemplate %}

{% template error_chart %}
<script type="text/javascript">
  var data = [
    {% for event in IDX_1.data %}
    ["{{ event[0] |  plus: trmnl.user.utc_offset | date: "%Y-%m-%d %H:%M" }}", {{ event[1][0].count }}],
    {% endfor %}

  ]

  // recommended configs to achieve the TRMNL Framework aesthetic
  var createChart = function() {
    new Chartkick["LineChart"](
      "chart-123",
      data,
      {
        adapter: "highcharts", // chartjs, google, etc available
        prefix: "",
        thousands: ",",
        points: false,
        colors: ["black"],
        curve: true,
        library: {
          chart: {
            height: {{ height }}
        },
        plotOptions: {
          series: {
            animation: false,
            lineWidth: 4
          }
        },
        yAxis: {
          labels: {
            style: {
              fontSize: "16px",
              color:"#000000"
            }
          },
          gridLineDashStyle: "shortdot",
          gridLineWidth: 1,
          gridLineColor: "#000000",
          tickAmount: 5
        },
        xAxis: {
          type: "daytime",
          labels: {
            style: {
              fontSize: "16px",
              color: "#000000"
            }
          },
          lineWidth: 0,
          gridLineDashStyle: "dot",
          tickWidth: 1,
          tickLength: 0,
          gridLineWidth: 1,
          gridLineColor: "#000000",
          tickPixelInterval: 120
        }
      }
      });
  };

  // ensure your chart loads before plugin render is generated
  if ("Chartkick" in window) {
    createChart();
  } else {
    window.addEventListener("chartkick:load", createChart, true);
  }
</script>

{% endtemplate %}